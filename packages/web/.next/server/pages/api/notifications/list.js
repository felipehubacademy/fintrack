"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/notifications/list";
exports.ids = ["pages/api/notifications/list"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnotifications%2Flist.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnotifications%2Flist.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_notifications_list_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/notifications/list.js */ \"(api)/./pages/api/notifications/list.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_notifications_list_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_notifications_list_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/notifications/list\",\n        pathname: \"/api/notifications/list\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_notifications_list_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5vdGlmaWNhdGlvbnMlMkZsaXN0JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZub3RpZmljYXRpb25zJTJGbGlzdC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM4RDtBQUM5RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNkRBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDZEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL21ldWF6dWxhby13ZWIvPzNjZDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9ub3RpZmljYXRpb25zL2xpc3QuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ub3RpZmljYXRpb25zL2xpc3RcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ub3RpZmljYXRpb25zL2xpc3RcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnotifications%2Flist.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/notifications/list.js":
/*!*****************************************!*\
  !*** ./pages/api/notifications/list.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * API: List Notifications\n * Listar notificações do usuário com paginação\n */ \nconst supabaseUrl = \"https://niyqusfrurutumqnopbm.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// Validar variáveis de ambiente\nif (!supabaseUrl || !supabaseServiceKey) {\n    console.error(\"❌ Vari\\xe1veis de ambiente faltando:\", {\n        NEXT_PUBLIC_SUPABASE_URL: !!supabaseUrl,\n        SUPABASE_SERVICE_ROLE_KEY: !!supabaseServiceKey\n    });\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"M\\xe9todo n\\xe3o permitido\"\n        });\n    }\n    // Verificar configuração do Supabase\n    if (!supabaseUrl || !supabaseServiceKey) {\n        console.error(\"❌ API notifications/list: Supabase n\\xe3o configurado\");\n        return res.status(500).json({\n            success: false,\n            error: \"Configura\\xe7\\xe3o do Supabase incompleta\",\n            details: {\n                url: !!supabaseUrl,\n                key: !!supabaseServiceKey\n            }\n        });\n    }\n    try {\n        const { user_id, organization_id, page = 1, limit = 20, type, unread_only = false } = req.query;\n        if (!user_id || !organization_id) {\n            return res.status(400).json({\n                error: \"user_id e organization_id s\\xe3o obrigat\\xf3rios\"\n            });\n        }\n        const offset = (parseInt(page) - 1) * parseInt(limit);\n        // Construir query\n        let query = supabase.from(\"notifications\").select(\"*\").eq(\"user_id\", user_id).eq(\"organization_id\", organization_id).order(\"created_at\", {\n            ascending: false\n        }).range(offset, offset + parseInt(limit) - 1);\n        // Filtros\n        if (type) {\n            query = query.eq(\"type\", type);\n        }\n        if (unread_only === \"true\") {\n            query = query.is(\"read_at\", null);\n        }\n        const { data: notifications, error } = await query;\n        if (error) throw error;\n        // Contar total para paginação\n        let countQuery = supabase.from(\"notifications\").select(\"id\", {\n            count: \"exact\",\n            head: true\n        }).eq(\"user_id\", user_id).eq(\"organization_id\", organization_id);\n        if (type) {\n            countQuery = countQuery.eq(\"type\", type);\n        }\n        if (unread_only === \"true\") {\n            countQuery = countQuery.is(\"read_at\", null);\n        }\n        const { count, error: countError } = await countQuery;\n        if (countError) throw countError;\n        // Agrupar por data\n        const groupedNotifications = {};\n        notifications.forEach((notification)=>{\n            const date = new Date(notification.created_at).toLocaleDateString(\"pt-BR\");\n            if (!groupedNotifications[date]) {\n                groupedNotifications[date] = [];\n            }\n            groupedNotifications[date].push(notification);\n        });\n        return res.status(200).json({\n            success: true,\n            notifications,\n            grouped: groupedNotifications,\n            pagination: {\n                page: parseInt(page),\n                limit: parseInt(limit),\n                total: count,\n                pages: Math.ceil(count / parseInt(limit))\n            }\n        });\n    } catch (error) {\n        console.error(\"Erro ao listar notifica\\xe7\\xf5es:\", error);\n        return res.status(500).json({\n            success: false,\n            error: \"Erro interno do servidor\",\n            message: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBYUcsVUFBVSxFQUFFQyxrQkFBa0IsQ0FBQztZQUNsRSxJQUFJLENBQUNOLG9CQUFvQixDQUFDRyxLQUFLLEVBQUU7Z0JBQy9CSCxvQkFBb0IsQ0FBQ0csS0FBSyxHQUFHLEVBQUU7WUFDakM7WUFDQUgsb0JBQW9CLENBQUNHLEtBQUssQ0FBQ0ksSUFBSSxDQUFDTDtRQUNsQztRQUVBLE9BQU9oQyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RxQjtZQUNBYSxTQUFTUjtZQUNUUyxZQUFZO2dCQUNWN0IsTUFBTU0sU0FBU047Z0JBQ2ZDLE9BQU9LLFNBQVNMO2dCQUNoQjZCLE9BQU9iO2dCQUNQYyxPQUFPQyxLQUFLQyxJQUFJLENBQUNoQixRQUFRWCxTQUFTTDtZQUNwQztRQUNGO0lBRUYsRUFBRSxPQUFPZixPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxzQ0FBZ0NBO1FBQzlDLE9BQU9JLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVFIsT0FBTztZQUNQZ0QsU0FBU2hELE1BQU1nRCxPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21ldWF6dWxhby13ZWIvLi9wYWdlcy9hcGkvbm90aWZpY2F0aW9ucy9saXN0LmpzPzY2ZmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBUEk6IExpc3QgTm90aWZpY2F0aW9uc1xuICogTGlzdGFyIG5vdGlmaWNhw6fDtWVzIGRvIHVzdcOhcmlvIGNvbSBwYWdpbmHDp8Ojb1xuICovXG5cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcblxuLy8gVmFsaWRhciB2YXJpw6F2ZWlzIGRlIGFtYmllbnRlXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcbiAgY29uc29sZS5lcnJvcign4p2MIFZhcmnDoXZlaXMgZGUgYW1iaWVudGUgZmFsdGFuZG86Jywge1xuICAgIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDogISFzdXBhYmFzZVVybCxcbiAgICBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZOiAhIXN1cGFiYXNlU2VydmljZUtleVxuICB9KTtcbn1cblxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNw6l0b2RvIG7Do28gcGVybWl0aWRvJyB9KTtcbiAgfVxuXG4gIC8vIFZlcmlmaWNhciBjb25maWd1cmHDp8OjbyBkbyBTdXBhYmFzZVxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQVBJIG5vdGlmaWNhdGlvbnMvbGlzdDogU3VwYWJhc2UgbsOjbyBjb25maWd1cmFkbycpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnQ29uZmlndXJhw6fDo28gZG8gU3VwYWJhc2UgaW5jb21wbGV0YScsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHVybDogISFzdXBhYmFzZVVybCxcbiAgICAgICAga2V5OiAhIXN1cGFiYXNlU2VydmljZUtleVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJfaWQsIG9yZ2FuaXphdGlvbl9pZCwgcGFnZSA9IDEsIGxpbWl0ID0gMjAsIHR5cGUsIHVucmVhZF9vbmx5ID0gZmFsc2UgfSA9IHJlcS5xdWVyeTtcblxuICAgIGlmICghdXNlcl9pZCB8fCAhb3JnYW5pemF0aW9uX2lkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICd1c2VyX2lkIGUgb3JnYW5pemF0aW9uX2lkIHPDo28gb2JyaWdhdMOzcmlvcycgXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvZmZzZXQgPSAocGFyc2VJbnQocGFnZSkgLSAxKSAqIHBhcnNlSW50KGxpbWl0KTtcblxuICAgIC8vIENvbnN0cnVpciBxdWVyeVxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbm90aWZpY2F0aW9ucycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJfaWQpXG4gICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbl9pZClcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgLnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgcGFyc2VJbnQobGltaXQpIC0gMSk7XG5cbiAgICAvLyBGaWx0cm9zXG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3R5cGUnLCB0eXBlKTtcbiAgICB9XG5cbiAgICBpZiAodW5yZWFkX29ubHkgPT09ICd0cnVlJykge1xuICAgICAgcXVlcnkgPSBxdWVyeS5pcygncmVhZF9hdCcsIG51bGwpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogbm90aWZpY2F0aW9ucywgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgIC8vIENvbnRhciB0b3RhbCBwYXJhIHBhZ2luYcOnw6NvXG4gICAgbGV0IGNvdW50UXVlcnkgPSBzdXBhYmFzZVxuICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnaWQnLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VyX2lkKVxuICAgICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25faWQpO1xuXG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIGNvdW50UXVlcnkgPSBjb3VudFF1ZXJ5LmVxKCd0eXBlJywgdHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKHVucmVhZF9vbmx5ID09PSAndHJ1ZScpIHtcbiAgICAgIGNvdW50UXVlcnkgPSBjb3VudFF1ZXJ5LmlzKCdyZWFkX2F0JywgbnVsbCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3I6IGNvdW50RXJyb3IgfSA9IGF3YWl0IGNvdW50UXVlcnk7XG5cbiAgICBpZiAoY291bnRFcnJvcikgdGhyb3cgY291bnRFcnJvcjtcblxuICAgIC8vIEFncnVwYXIgcG9yIGRhdGFcbiAgICBjb25zdCBncm91cGVkTm90aWZpY2F0aW9ucyA9IHt9O1xuICAgIG5vdGlmaWNhdGlvbnMuZm9yRWFjaChub3RpZmljYXRpb24gPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKG5vdGlmaWNhdGlvbi5jcmVhdGVkX2F0KS50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gICAgICBpZiAoIWdyb3VwZWROb3RpZmljYXRpb25zW2RhdGVdKSB7XG4gICAgICAgIGdyb3VwZWROb3RpZmljYXRpb25zW2RhdGVdID0gW107XG4gICAgICB9XG4gICAgICBncm91cGVkTm90aWZpY2F0aW9uc1tkYXRlXS5wdXNoKG5vdGlmaWNhdGlvbik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG5vdGlmaWNhdGlvbnMsXG4gICAgICBncm91cGVkOiBncm91cGVkTm90aWZpY2F0aW9ucyxcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgcGFnZTogcGFyc2VJbnQocGFnZSksXG4gICAgICAgIGxpbWl0OiBwYXJzZUludChsaW1pdCksXG4gICAgICAgIHRvdGFsOiBjb3VudCxcbiAgICAgICAgcGFnZXM6IE1hdGguY2VpbChjb3VudCAvIHBhcnNlSW50KGxpbWl0KSlcbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gbGlzdGFyIG5vdGlmaWNhw6fDtWVzOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0Vycm8gaW50ZXJubyBkbyBzZXJ2aWRvcicsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJkZXRhaWxzIiwidXJsIiwia2V5IiwidXNlcl9pZCIsIm9yZ2FuaXphdGlvbl9pZCIsInBhZ2UiLCJsaW1pdCIsInR5cGUiLCJ1bnJlYWRfb25seSIsInF1ZXJ5Iiwib2Zmc2V0IiwicGFyc2VJbnQiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsInJhbmdlIiwiaXMiLCJkYXRhIiwibm90aWZpY2F0aW9ucyIsImNvdW50UXVlcnkiLCJjb3VudCIsImhlYWQiLCJjb3VudEVycm9yIiwiZ3JvdXBlZE5vdGlmaWNhdGlvbnMiLCJmb3JFYWNoIiwibm90aWZpY2F0aW9uIiwiZGF0ZSIsIkRhdGUiLCJjcmVhdGVkX2F0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicHVzaCIsImdyb3VwZWQiLCJwYWdpbmF0aW9uIiwidG90YWwiLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/notifications/list.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnotifications%2Flist&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnotifications%2Flist.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();